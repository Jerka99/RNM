import{useMemo as e,useLayoutEffect as n,forwardRef as t,createElement as o,createContext as r,memo as i,useContext as a,Fragment as l}from"react";var c=new Set;function s(e){return clearTimeout(e),c.delete(e)}function u(){Array.from(c).forEach((function(e){return s(e)}))}var v={cleanGlobalEffectsThreshold:100,swipeMaxDurationThreshold:600,swipeMinDistanceThreshold:25,tapMaxDistanceThreshold:10,holdDurationThreshold:600,dblIntervalThreshold:500};function f(e,n){if(!e||!n)return 0;var t=e.clientX-n.clientX,o=e.clientY-n.clientY;return Math.sqrt(t*t+o*o)}function p(e,n){var t=Math.max(e.clientX,n.clientX),o=Math.min(e.clientX,n.clientX),r=o+(t-o)/2,i=Math.max(e.clientY,n.clientY),a=Math.min(e.clientY,n.clientY);return{clientX:r,clientY:a+(i-a)/2}}function d(e,n){return Math.atan2(n.clientY-e.clientY,n.clientX-e.clientX)*(180/Math.PI)}var h=navigator.platform.match("Mac")&&(navigator.maxTouchPoints||0)>1,g=/(iPhone|iPad|iPod|iOS)/i.test(navigator.userAgent)||h,m={activePointersTotal:0,primaryStartPoint:{clientX:0,clientY:0},primaryEndPoint:{clientX:0,clientY:0},get primaryMoveDistance(){return f(m.primaryStartPoint,m.primaryEndPoint)}};function P(){u()}function y(e){if(m.activePointersTotal++,e.isPrimary){var n=e.clientX,t=e.clientY;m.primaryStartPoint={clientX:n,clientY:t},m.primaryEndPoint={clientX:n,clientY:t}}}function w(e){if(e.isPrimary&&m.activePointersTotal>0){var n=e.clientX,t=e.clientY;m.primaryEndPoint={clientX:n,clientY:t}}}function b(e){if(e.isPrimary){var n=e.clientX,t=e.clientY;m.primaryEndPoint={clientX:n,clientY:t}}m.activePointersTotal--,m.activePointersTotal<1&&setTimeout(P,v.cleanGlobalEffectsThreshold)}function E(){document.removeEventListener("pointerdown",y,!0),document.removeEventListener("pointermove",w,!0),document.removeEventListener("pointerup",b,!0),document.removeEventListener("pointercancel",b,!0),document.addEventListener("pointerdown",y,!0),document.addEventListener("pointermove",w,!0),document.addEventListener("pointerup",b,!0),document.addEventListener("pointercancel",b,!0)}E();var _=new Set,S=new Set(["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onKeyDown","onKeyUp","onFocus","onBlur"]);function x(e){_.add(e),e.events.forEach((function(e){return S.add(e)}))}function D(){return S}var M=function(e,n){return(M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])})(e,n)};function C(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function t(){this.constructor=e}M(e,n),e.prototype=null===n?Object.create(n):(t.prototype=n.prototype,new t)}var L=function(){return(L=Object.assign||function(e){for(var n,t=1,o=arguments.length;t<o;t++)for(var r in n=arguments[t])Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);return e}).apply(this,arguments)};function T(e,n){var t={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&n.indexOf(o)<0&&(t[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)n.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(t[o[r]]=e[o[r]])}return t}function X(e,n,t,o){return new(t||(t=Promise))((function(r,i){function a(e){try{c(o.next(e))}catch(e){i(e)}}function l(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var n;e.done?r(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(a,l)}c((o=o.apply(e,n||[])).next())}))}function Y(e,n){var t,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(l){return function(c){return function(l){if(t)throw new TypeError("Generator is already executing.");for(;i&&(i=0,l[0]&&(a=0)),a;)try{if(t=1,o&&(r=2&l[0]?o.return:l[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,l[1])).done)return r;switch(o=0,r&&(l=[2&l[0],r.value]),l[0]){case 0:case 1:r=l;break;case 4:return a.label++,{value:l[1],done:!1};case 5:a.label++,o=l[1],l=[0];continue;case 7:l=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==l[0]&&2!==l[0])){a=0;continue}if(3===l[0]&&(!r||l[1]>r[0]&&l[1]<r[3])){a.label=l[1];break}if(6===l[0]&&a.label<r[1]){a.label=r[1],r=l;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(l);break}r[2]&&a.ops.pop(),a.trys.pop();continue}l=n.call(e,a)}catch(e){l=[6,e],o=0}finally{t=r=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,c])}}}function F(e,n,t){if(t||2===arguments.length)for(var o,r=0,i=n.length;r<i;r++)!o&&r in n||(o||(o=Array.prototype.slice.call(n,0,r)),o[r]=n[r]);return e.concat(o||Array.prototype.slice.call(n))}var O={stopImmediatePropagation:function(){var e,n;u(),null===(n=null===(e=this.hostEvent)||void 0===e?void 0:e.stopImmediatePropagation)||void 0===n||n.call(e)},stopPropagation:function(){var e,n;u(),null===(n=null===(e=this.hostEvent)||void 0===e?void 0:e.stopPropagation)||void 0===n||n.call(e)}};function K(e,n){var t=n||{};return Object.setPrototypeOf(t,O),t.hostEvent=e,t}function U(e,n,t){var o;return null===(o=n.persist)||void 0===o||o.call(n),K(n,L(L({},t),{fingerType:e,detail:t}))}["nativeEvent","pointerId","width","height","pressure","tiltX","tiltY","twist","pointerType","isPrimary","screenX","screenY","clientX","clientY","ctrlKey","shiftKey","altKey","metaKey","button","buttons","pageX","pageY","offsetX","offsetY","movementX","movementY","type","target","currentTarget","bubbles","cancelable","timeStamp","cancelBubble","composedPath","preventDefault","eventPhase","isDefaultPrevented","isPropagationStopped","isTrusted","defaultPrevented","getModifierState","location","path","view","charCode","code","key","keyCode","which","repeat"].forEach((function(e){Object.defineProperty(O,e,{get:function(){var n=this.hostEvent[e];return function(e){return"function"==typeof e}(n)?n.bind(this.hostEvent):n}})}));var I=Symbol(),j=Symbol(),A=Symbol(),k=Symbol(),B=Symbol(),W=Symbol(),R=[I,j,A,k,B,W],q={name:"Pinch",events:["onPinchStart","onPinch","onPinchEnd"],handlePointerDown:function(e){var n,t,o,r=e.events,i=e.context,a=e.pointer;null===(t=(n=a.target).setPointerCapture)||void 0===t||t.call(n,a.pointerId),a.isPrimary&&i.cleanFlags(R);var l=i.flags,c=i.getPointers,s=i.getChangedPointers,u=c(),v=s();if(u.length>1&&!l.get(I)){l.set(I,!0);var h=f(u[0],u[1]);l.set(A,h);var g=d(u[0],u[1]);l.set(W,g);var m=p(v[0],v[1]);l.set(k,m),l.set(B,m);var P={pointers:u,changedPointers:v,centerX:m.clientX,centerY:m.clientY,scale:1,rotate:0,moveX:0,moveY:0,movementX:0,movementY:0};l.set(j,P),null===(o=r.onPinchStart)||void 0===o||o.call(r,U("onPinchStart",a,P))}},handlePointerMove:function(e){var n,t=e.events,o=e.context,r=e.pointer,i=o.flags,a=o.getPointers,l=o.getChangedPointers,c=a(),s=l();if(!(c.length<2)&&i.get(I)){var u=i.get(A),v=f(s[0],s[1])/u,h=i.get(k),g=i.get(B),m=p(s[0],s[1]);i.set(B,m);var P=m.clientX,y=m.clientY,w=m.clientX-h.clientX,b=m.clientY-h.clientY,E=m.clientX-g.clientX,_=m.clientY-g.clientY,S=i.get(W),x={pointers:c,changedPointers:s,centerX:P,centerY:y,scale:v,moveX:w,moveY:b,movementX:E,movementY:_,rotate:d(s[0],s[1])-S};i.set(j,x),null===(n=t.onPinch)||void 0===n||n.call(t,U("onPinch",r,x))}},handlePointerWillUp:function(e){var n,t,o,r=e.events,i=e.context,a=e.pointer;null===(t=(n=a.target).releasePointerCapture)||void 0===t||t.call(n,a.pointerId);var l=i.flags;if(2===(0,i.getPointers)().length&&l.get(I)){l.set(I,!1);var c=l.get(j);null===(o=r.onPinchEnd)||void 0===o||o.call(r,U("onPinchEnd",a,c))}},handlePointerWillCancel:function(e){var n,t,o,r=e.events,i=e.context,a=e.pointer;null===(t=(n=a.target).releasePointerCapture)||void 0===t||t.call(n,a.pointerId);var l=i.flags;if(2===(0,i.getPointers)().length&&l.get(I)){l.set(I,!1);var c=l.get(j);null===(o=r.onPinchEnd)||void 0===o||o.call(r,U("onPinchEnd",a,c))}}},G=Symbol(),H=[G],z={name:"Basic",events:["onFingerDown","onFingerMove","onFingerUp","onFingerCancel"],handlePointerDown:function(e){var n=e.events,t=e.context,o=e.pointer;if(o.isPrimary&&t.cleanFlags(H),t.flags.delete(G),n.onFingerDown){var r=t.getPointers,i=t.getChangedPointers,a={pointers:r(),changedPointers:i()};n.onFingerDown(U("onFingerDown",o,a))}},handlePointerMove:function(e){var n=e.events,t=e.context,o=e.pointer;if(n.onFingerMove){var r=t.getPointers,i=t.getChangedPointers,a=t.flags,l=r(),c=i();if(!g||"mouse"===o.pointerType||1!==l.length||o.movementX||o.movementY){f={pointers:l,changedPointers:c};n.onFingerMove(U("onFingerMove",o,f))}else{var s=o.clientX,u=o.clientY,v=a.get(G)||l[0],f={pointers:l,changedPointers:c,movementX:s-v.clientX,movementY:u-v.clientY};n.onFingerMove(U("onFingerMove",o,f)),a.set(G,{clientX:s,clientY:u})}}},handlePointerUp:function(e){var n=e.events,t=e.context,o=e.pointer;if(t.flags.delete(G),n.onFingerUp){var r=t.getPointers,i=t.getChangedPointers,a={pointers:r(),changedPointers:i()};n.onFingerUp(U("onFingerUp",o,a))}},handlePointerCancel:function(e){var n=e.events,t=e.context,o=e.pointer;if(t.flags.delete(G),n.onFingerCancel){var r=t.getPointers,i=t.getChangedPointers,a={pointers:r(),changedPointers:i()};n.onFingerCancel(U("onFingerCancel",o,a))}}},J=v.swipeMinDistanceThreshold,N=v.swipeMaxDurationThreshold,Q=Symbol(),V=Symbol(),Z=[Q,V],$={down:"onSwipeDown",up:"onSwipeUp",right:"onSwipeRight",left:"onSwipeLeft"},ee={name:"Swipe",events:["onSwipe","onSwipeUp","onSwipeDown","onSwipeLeft","onSwipeRight"],handlePointerDown:function(e){var n,t,o=e.context,r=e.pointer;null===(t=(n=r.target).setPointerCapture)||void 0===t||t.call(n,r.pointerId),r.isPrimary&&o.cleanFlags(Z);var i=o.flags,a=o.getPointers;i.set(Q,a().length>1),i.set(V,Date.now())},handlePointerWillUp:function(e){var n,t,o,r,i=e.events,a=e.context,l=e.pointer;null===(t=(n=l.target).releasePointerCapture)||void 0===t||t.call(n,l.pointerId);var c=a.flags,s=a.getPointers,u=a.getChangedPointers,v=Date.now()-c.get(V)>N;if(!c.get(Q)&&!v){var f=s(),p=u(),d=f[0],h=p[0],g=(null==h?void 0:h.clientX)-(null==d?void 0:d.clientX),m=(null==h?void 0:h.clientY)-(null==d?void 0:d.clientY),P=Math.abs(g)>Math.abs(m)&&Math.abs(g)>J?g>0?"right":"left":Math.abs(g)<Math.abs(m)&&Math.abs(m)>J?m>0?"down":"up":void 0;if(P){var y={pointers:f,changedPointers:p,direction:P};null===(o=i.onSwipe)||void 0===o||o.call(i,U("onSwipe",l,y));var w=$[P];null===(r=i[w])||void 0===r||r.call(i,U(w,l,y))}}},handlePointerCancel:function(e){var n,t,o=e.context,r=e.pointer;null===(t=(n=r.target).releasePointerCapture)||void 0===t||t.call(n,r.pointerId),o.flags.set(Q,!0)}},ne=v.tapMaxDistanceThreshold,te=v.holdDurationThreshold,oe=v.dblIntervalThreshold,re=Symbol(),ie=Symbol(),ae=Symbol(),le=Symbol(),ce=Symbol(),se={name:"Tap",events:["onTap","onTapHold","onDoubleTap"],handlePointerDown:function(e){var n,t,o=e.events,r=e.context,i=e.pointer;i.isPrimary&&r.cleanTimers();var a=r.flags,l=r.getPointers,u=r.getChangedPointers,v=l(),f=u();if(a.set(ie,v.length>1),a.get(ie))return s(a.get(re));null===(t=(n=i.target).setPointerCapture)||void 0===t||t.call(n,i.pointerId);var p,d,h={pointers:v,changedPointers:f};a.set(re,(p=function(){var e;a.get(ie)||1===m.activePointersTotal&&(m.primaryMoveDistance>ne||(r.clean(),a.set(ie,!0),null===(e=o.onTapHold)||void 0===e||e.call(o,U("onTapHold",i,h))))},d=setTimeout((function(){s(d),p()}),te),c.add(d),d))},handlePointerMove:function(e){var n=e.context,t=n.flags,o=n.getPointers,r=n.getChangedPointers;if(!t.get(ie)){var i=o(),a=r();f(i[0],a[0])>ne&&(t.set(ie,!0),s(t.get(re)))}},handlePointerWillUp:function(e){var n,t,o,r,i=e.events,a=e.context,l=e.pointer,c=a.flags,u=a.getPointers,v=a.getChangedPointers;if(s(c.get(re)),!c.get(ie)){null===(t=(n=l.target).releasePointerCapture)||void 0===t||t.call(n,l.pointerId);var p=u(),d=v(),h={pointers:p,changedPointers:d};null===(o=i.onTap)||void 0===o||o.call(i,U("onTap",l,h));var g=c.get(le)||0,P=Date.now()-g>oe,y=c.get(ce),w=y&&f(y,d[0]),b=w&&w>ne||m.primaryMoveDistance>ne;!c.get(ae)||P||b?(c.set(le,Date.now()),c.set(ce,d[0]),c.set(ae,!0)):(P||b||null===(r=i.onDoubleTap)||void 0===r||r.call(i,U("onDoubleTap",l,h)),c.set(ae,!1))}},handlePointerCancel:function(e){var n,t,o=e.context,r=e.pointer;null===(t=(n=r.target).releasePointerCapture)||void 0===t||t.call(n,r.pointerId);var i=o.flags;i.set(ie,!0),s(i.get(re))}};var ue=Symbol(),ve=Symbol(),fe=["control","meta","shift","alt"];function pe(e){return fe.indexOf(e)>-1}function de(e,n,t){return t?e.add(n):e.delete(n)}function he(e){var n=e.has(ue)?e.get(ue):new Set;return e.has(ue)||e.set(ue,n),n}var ge={name:"Shortcut",events:["onShortcut"],handleKeyDown:function(e){var n,t=e.events,o=e.context,r=e.event,i=o.flags;if(r.repeat||i.set(ve,"down"),"up"!==i.get(ve)){var a=he(i);!function(e,n){(n.metaKey||"Meta"===n.key)&&Array.from(e).forEach((function(n){return!pe(n)&&e.delete(n)}))}(a,r),function(e,n){de(e,"control",n.ctrlKey),de(e,"meta",n.metaKey),de(e,"shift",n.shiftKey),de(e,"alt",n.altKey)}(a,r),a.add(r.key.toLowerCase());var l=Array.from(a),c=function(e,n,t){var o;return null===(o=n.persist)||void 0===o||o.call(n),K(n,L(L({},t),{fingerType:e,detail:t}))}("onShortcut",r,{when:function(e,n){return function(e,n){return e&&n&&n.length===e.size&&n.every((function(n){return e.has(n.toLowerCase())}))}(a,e)&&n(r)},keys:l});null===(n=t.onShortcut)||void 0===n||n.call(t,c)}},handleKeyUp:function(e){var n=e.context,t=e.event,o=n.flags;if(o.has(ue)){o.set(ve,"up");var r=he(o);r.delete(t.key.toLowerCase()),function(e,n){(n.metaKey||"Meta"===n.key)&&Array.from(e).forEach((function(n){return!pe(n)&&e.delete(n)}))}(r,t)}},handleBlur:function(e){var n=e.context.flags;n.delete(ue),n.delete(ve)}};function me(e){return K(e)}var Pe=_;function ye(e,n){return e.events.some((function(e){return!!n[e]}))}function we(e){var n,t,o,r,i,a,l,c=(n=new Map,t=new Map,o=new Map,l=function(e){if(!e||e.length<1)return n.clear();e.forEach((function(e){return n.delete(e)}))},{addPointer:function(e){t.set(e.pointerId,me(e)),r(e)},updatePointer:r=function(e){o.set(e.pointerId,me(e))},removePointer:function(e){t.delete(e.pointerId),o.delete(e.pointerId)},getPointers:function(){return Array.from(t.values())},getChangedPointers:function(){return Array.from(o.values())},flags:n,cleanTimers:i=function(){return u()},cleanPointers:a=function(){t.clear(),o.clear()},cleanFlags:l,clean:function(){i(),a(),l()}});return{onPointerDown:function(e,n){return function(t){var o;t.isPrimary&&n.cleanPointers(),null===(o=e.onPointerDown)||void 0===o||o.call(e,t),Pe.forEach((function(o){var r;return ye(o,e)&&(null===(r=o.handlePointerWillDown)||void 0===r?void 0:r.call(o,{events:e,context:n,pointer:t}))})),n.addPointer(t),Pe.forEach((function(o){var r;return ye(o,e)&&(null===(r=o.handlePointerDown)||void 0===r?void 0:r.call(o,{events:e,context:n,pointer:t}))}))}}(e,c),onPointerMove:function(e,n){return function(t){var o;null===(o=e.onPointerMove)||void 0===o||o.call(e,t),n.getPointers().length<1||(Pe.forEach((function(o){var r;return ye(o,e)&&(null===(r=o.handlePointerWillMove)||void 0===r?void 0:r.call(o,{events:e,context:n,pointer:t}))})),n.updatePointer(t),Pe.forEach((function(o){var r;return ye(o,e)&&(null===(r=o.handlePointerMove)||void 0===r?void 0:r.call(o,{events:e,context:n,pointer:t}))})))}}(e,c),onPointerUp:function(e,n){return function(t){var o;null===(o=e.onPointerUp)||void 0===o||o.call(e,t),Pe.forEach((function(o){var r;return ye(o,e)&&(null===(r=o.handlePointerWillUp)||void 0===r?void 0:r.call(o,{events:e,context:n,pointer:t}))})),n.removePointer(t),Pe.forEach((function(o){var r;return ye(o,e)&&(null===(r=o.handlePointerUp)||void 0===r?void 0:r.call(o,{events:e,context:n,pointer:t}))}))}}(e,c),onPointerCancel:function(e,n){return function(t){var o;null===(o=e.onPointerCancel)||void 0===o||o.call(e,t),Pe.forEach((function(o){var r;return ye(o,e)&&(null===(r=o.handlePointerWillCancel)||void 0===r?void 0:r.call(o,{events:e,context:n,pointer:t}))})),n.removePointer(t),Pe.forEach((function(o){var r;return ye(o,e)&&(null===(r=o.handlePointerCancel)||void 0===r?void 0:r.call(o,{events:e,context:n,pointer:t}))}))}}(e,c),onKeyDown:function(e,n){return function(t){var o;null===(o=e.onKeyDown)||void 0===o||o.call(e,t),Pe.forEach((function(o){var r;return ye(o,e)&&(null===(r=o.handleKeyDown)||void 0===r?void 0:r.call(o,{events:e,context:n,event:t}))}))}}(e,c),onKeyUp:function(e,n){return function(t){var o;null===(o=e.onKeyUp)||void 0===o||o.call(e,t),Pe.forEach((function(o){var r;return ye(o,e)&&(null===(r=o.handleKeyUp)||void 0===r?void 0:r.call(o,{events:e,context:n,event:t}))}))}}(e,c),onFocus:function(e,n){return function(t){var o;null===(o=e.onFocus)||void 0===o||o.call(e,t),Pe.forEach((function(o){var r;return ye(o,e)&&(null===(r=o.handleFocus)||void 0===r?void 0:r.call(o,{events:e,context:n,event:t}))}))}}(e,c),onBlur:function(e,n){return function(t){var o;null===(o=e.onBlur)||void 0===o||o.call(e,t),Pe.forEach((function(o){var r;return ye(o,e)&&(null===(r=o.handleBlur)||void 0===r?void 0:r.call(o,{events:e,context:n,event:t}))}))}}(e,c)}}function be(e){return we(e)}function Ee(t){var o=e((function(){return{}}),[]);return n((function(){t&&Object.assign(o,t)})),e((function(){return we(o)}),[])}function _e(e){var n=D(),t={},o={};return Object.entries(e).forEach((function(e){var r=e[0],i=e[1];n.has(r)?t[r]=i:o[r]=i})),{eventProps:t,otherProps:o}}var Se=new Map;function xe(e){if(Se.has(e))return Se.get(e);var n=t((function(n,t){var r=_e(n),i=r.eventProps,a=r.otherProps,l=Ee(i);return o(e,L(L(L({},a),l),{ref:t}))}));return Se.set(e,n),n}var De=function(){function e(e){var n=L({},e),t=n.maxListeners,o=void 0===t?1024:t,r=n.requireLoopRemove,i=void 0!==r&&r;this.__maxListeners=o,this.__listeners={},this.__requireLoopRemove=i}return e.prototype.addListener=function(e,n){this.__listeners[e]=this.__listeners[e]||[],this.__listeners[e].push(n);var t=this.__maxListeners;if(this.__listeners[e].length>t){var o="The '".concat(e,"' listener is not more than ").concat(t);console.warn(o,this)}},e.prototype.on=function(e,n){return this.addListener(e,n)},e.prototype.removeListener=function(e,n){this.__listeners[e]&&n&&(this.__listeners[e]=this.__listeners[e].filter((function(e){return e!==n})))},e.prototype.off=function(e,n){return this.removeListener(e,n)},e.prototype.removeAllListener=function(e){var n=this;e?(this.__requireLoopRemove&&this.__listeners[e]&&this.__listeners[e].slice(0).forEach((function(t){n.removeListener(e,t)})),this.__listeners[e]=[]):(this.__requireLoopRemove&&Object.keys(this.__listeners).forEach((function(e){n.removeAllListener(e)})),this.__listeners={})},e.prototype.emit=function(e){for(var n=this,t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];if(this.__listeners[e]){var r=this.__listeners[e].slice(0);return r.map((function(e){return e.call.apply(e,F([n],t,!1))}))}},e.prototype.emitSerial=function(e){for(var n=this,t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];if(this.__listeners[e]){var r=this.__listeners[e].slice(0);return r.reduce((function(e,o){return X(n,void 0,void 0,(function(){return Y(this,(function(n){switch(n.label){case 0:return[4,e];case 1:return!1===n.sent()?[2,!1]:[2,o.call.apply(o,F([this],t,!1))]}}))}))}),!0)}},e.prototype.emitParallel=function(e){for(var n=this,t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];if(this.__listeners[e]){var r=this.__listeners[e].slice(0);return Promise.all(r.map((function(e){return e.call.apply(e,F([n],t,!1))})))}},e.prototype.emitAsync=function(e){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];return this.emitParallel.apply(this,F([e],n,!1))},e}(),Me=function(e){function n(n){return e.call(this,n)||this}return C(n,e),n.prototype.emit=function(n){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];return e.prototype.emit.apply(this,F([n],t,!1))},n.prototype.emitSerial=function(n){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];return e.prototype.emitSerial.apply(this,F([n],t,!1))},n.prototype.emitParallel=function(n){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];return e.prototype.emitParallel.apply(this,F([n],t,!1))},n.prototype.emitAsync=function(e){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];return this.emitAsync.apply(this,F([e],n,!1))},n}(De);function Ce(e){return e.slice(2).toLocaleLowerCase()}!function(e){function n(n,t){var o=e.call(this,L({requireLoopRemove:!0},t))||this;return o.target=n,o}C(n,e),n.defineEvent=function(e){var t=e&&e.name;t&&(t instanceof Array?t:[t]).forEach((function(t){n.__composeEvents[t]=e}))},n.getEventDescriptor=function(e){return n.__composeEvents[e]},n.prototype.addListener=function(t,o,r){void 0===r&&(r=!1),e.prototype.addListener.call(this,t,o),this.target.addEventListener(t,o,r);var i=n.getEventDescriptor(t);i&&i.addListener(this,t,o,r)},n.prototype.removeListener=function(t,o,r){void 0===r&&(r=!1),e.prototype.removeListener.call(this,t,o),this.target.removeEventListener(t,o,r);var i=n.getEventDescriptor(t);i&&i.removeListener(this,t,o,r)},n.prototype.dispatch=function(e,n,t){var o=new CustomEvent(e,L(L({},t),{detail:n}));return this.target.dispatchEvent(o)},n.__composeEvents={}}(De);var Le=r(null),Te=i((function(e){var t=a(Le),r=e.target,i=void 0===r?t||document:r,c=e.passive,s=void 0===c||c,u=Ee(T(e,["target","passive"]));return n((function(){var e=!!t,n=Object.entries(u);return n.forEach((function(n){var t=n[0],o=n[1];t=e?t:Ce(t),i.addEventListener(t,o,{passive:s})}),!1),function(){n.forEach((function(n){var t=n[0],o=n[1];t=e?t:Ce(t),i.removeEventListener(t,o)}),!1)}}),Object.values(e)),o(l)}));var Xe=i((function(n){var t=n.children,r=T(n,["children"]),i=e((function(){return function(e){e||(e=L({},e));var n=e.onPointerDown,t=e.onPointerMove,o=e.onPointerUp,r=e.onPointerCancel,i=e.onKeyDown,a=e.onKeyUp,l=e.onFocus,c=e.onBlur,s=new Me;return[{onPointerDown:function(e){n&&n(e),s.emit("onPointerDown",e)},onPointerMove:function(e){t&&t(e),s.emit("onPointerMove",e)},onPointerUp:function(e){o&&o(e),s.emit("onPointerUp",e)},onPointerCancel:function(e){r&&r(e),s.emit("onPointerCancel",e)},onKeyDown:function(e){i&&i(e),s.emit("onKeyDown",e)},onKeyUp:function(e){a&&a(e),s.emit("onKeyUp",e)},onFocus:function(e){l&&l(e),s.emit("onFocus",e)},onBlur:function(e){c&&c(e),s.emit("onBlur",e)}},{addEventListener:function(e,n){return s.addListener(e,n)},removeEventListener:function(e,n){return s.removeListener(e,n)}}]}(r)}),[]),a=i[0],l=i[1];return o(Le.Provider,{value:l,children:t(a)})})),Ye=new Map;function Fe(e){if(Ye.has(e))return Ye.get(e);var n=t((function(n,t){var r=n.eventBoundary,i=T(n,["eventBoundary"]);if(!1===r)return o(e,L(L({},i),{ref:t}));var a=_e(i).eventProps;return o(Xe,L(L({},a),{children:function(n){return o(e,L(L(L({},i),n),{ref:t}))}}))}));return Ye.set(e,n),n}x(q),x(ee),x(se),x(z),x(ge);export{xe as Finger,m as FingerGlobal,v as FingerOptions,Te as FingerProxy,Xe as FingerProxyBoundary,Fe as FingerProxyContainer,E as bindFingerGlobalEvents,we as composeFingerEvents,be as createFingerEvents,Ee as useFingerEvents};
